<% include ../partials/header %>
  <!-- Datepicker -->
  <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
  <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />

</head>
<body>

<% include ../partials/navbar %>

<div class="container mb-5">
  <h1 class='mt-3 mb-3'>Edit Worker</h1>
  <form action="/users/<%= currentUser._id %>/workers/<%= foundWorker._id %>?_method=PUT" method="POST">
    <div class="form-row">
      <div class="form-group col-md-5">
        <label for="firstName">First Name</label>
        <input type="text" class="form-control" id="firstName" name="firstName" value="<%= foundWorker.firstName %>">
      </div>
      <div class="form-group col-md-5">
        <label for="lastName">Last Name</label>
        <input type="text" class="form-control" id="lastName" name="lastName" value="<%= foundWorker.lastName %>">
      </div>
      <div class="form-group col-md-2">
        <label for="gender">Gender</label>
        <select id="gender" name="gender" class="form-control">
          <option <%= foundWorker.gender === "Male" ? "selected" : "" %>>Male</option>
          <option <%= foundWorker.gender === "Female" ? "selected" : "" %>>Female</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label for="dob" class="mt-2">Date of Birth</label>
      <input class="form-control" id="dob" name="dob" width="276" value="<%= foundWorker.dob.toLocaleDateString("en-US") %>">
    </div>
    <div class="form-group">
      <label for="address">Address</label>
      <input type="text" class="form-control" id="address" name="address" value="<%= foundWorker.address %>">
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="city">City</label>
        <input type="text" class="form-control" id="city" name="city" value="<%= foundWorker.city %>">
      </div>
      <div class="form-group col-md-4">
        <label for="state">State</label>
        <select id="state" name="state" class="form-control">
          <option value="AL" <%= foundWorker.state === "AL" ? "selected" : "" %>>Alabama</option>
        	<option value="AK" <%= foundWorker.state === "AK" ? "selected" : "" %>>Alaska</option>
        	<option value="AZ" <%= foundWorker.state === "AZ" ? "selected" : "" %>>Arizona</option>
        	<option value="AR" <%= foundWorker.state === "AR" ? "selected" : "" %>>Arkansas</option>
        	<option value="CA" <%= foundWorker.state === "CA" ? "selected" : "" %>>California</option>
        	<option value="CO" <%= foundWorker.state === "CO" ? "selected" : "" %>>Colorado</option>
        	<option value="CT" <%= foundWorker.state === "CT" ? "selected" : "" %>>Connecticut</option>
        	<option value="DE" <%= foundWorker.state === "DE" ? "selected" : "" %>>Delaware</option>
        	<option value="DC" <%= foundWorker.state === "DC" ? "selected" : "" %>>District Of Columbia</option>
        	<option value="FL" <%= foundWorker.state === "FL" ? "selected" : "" %>>Florida</option>
        	<option value="GA" <%= foundWorker.state === "GA" ? "selected" : "" %>>Georgia</option>
        	<option value="HI" <%= foundWorker.state === "HI" ? "selected" : "" %>>Hawaii</option>
        	<option value="ID" <%= foundWorker.state === "ID" ? "selected" : "" %>>Idaho</option>
        	<option value="IL" <%= foundWorker.state === "IL" ? "selected" : "" %>>Illinois</option>
        	<option value="IN" <%= foundWorker.state === "IN" ? "selected" : "" %>>Indiana</option>
        	<option value="IA" <%= foundWorker.state === "IA" ? "selected" : "" %>>Iowa</option>
        	<option value="KS" <%= foundWorker.state === "KS" ? "selected" : "" %>>Kansas</option>
        	<option value="KY" <%= foundWorker.state === "KY" ? "selected" : "" %>>Kentucky</option>
        	<option value="LA" <%= foundWorker.state === "LA" ? "selected" : "" %>>Louisiana</option>
        	<option value="ME" <%= foundWorker.state === "ME" ? "selected" : "" %>>Maine</option>
        	<option value="MD" <%= foundWorker.state === "MD" ? "selected" : "" %>>Maryland</option>
        	<option value="MA" <%= foundWorker.state === "MA" ? "selected" : "" %>>Massachusetts</option>
        	<option value="MI" <%= foundWorker.state === "MI" ? "selected" : "" %>>Michigan</option>
        	<option value="MN" <%= foundWorker.state === "MN" ? "selected" : "" %>>Minnesota</option>
        	<option value="MS" <%= foundWorker.state === "MS" ? "selected" : "" %>>Mississippi</option>
        	<option value="MO" <%= foundWorker.state === "MO" ? "selected" : "" %>>Missouri</option>
        	<option value="MT" <%= foundWorker.state === "MT" ? "selected" : "" %>>Montana</option>
        	<option value="NE" <%= foundWorker.state === "NE" ? "selected" : "" %>>Nebraska</option>
        	<option value="NV" <%= foundWorker.state === "NV" ? "selected" : "" %>>Nevada</option>
        	<option value="NH" <%= foundWorker.state === "NH" ? "selected" : "" %>>New Hampshire</option>
        	<option value="NJ" <%= foundWorker.state === "NJ" ? "selected" : "" %>>New Jersey</option>
        	<option value="NM" <%= foundWorker.state === "NM" ? "selected" : "" %>>New Mexico</option>
        	<option value="NY" <%= foundWorker.state === "NY" ? "selected" : "" %>>New York</option>
        	<option value="NC" <%= foundWorker.state === "NC" ? "selected" : "" %>>North Carolina</option>
        	<option value="ND" <%= foundWorker.state === "ND" ? "selected" : "" %>>North Dakota</option>
        	<option value="OH" <%= foundWorker.state === "OH" ? "selected" : "" %>>Ohio</option>
        	<option value="OK" <%= foundWorker.state === "OK" ? "selected" : "" %>>Oklahoma</option>
        	<option value="OR" <%= foundWorker.state === "OR" ? "selected" : "" %>>Oregon</option>
        	<option value="PA" <%= foundWorker.state === "PA" ? "selected" : "" %>>Pennsylvania</option>
        	<option value="RI" <%= foundWorker.state === "RI" ? "selected" : "" %>>Rhode Island</option>
        	<option value="SC" <%= foundWorker.state === "SC" ? "selected" : "" %>>South Carolina</option>
        	<option value="SD" <%= foundWorker.state === "SD" ? "selected" : "" %>>South Dakota</option>
        	<option value="TN" <%= foundWorker.state === "TN" ? "selected" : "" %>>Tennessee</option>
        	<option value="TX" <%= foundWorker.state === "TX" ? "selected" : "" %>>Texas</option>
        	<option value="UT" <%= foundWorker.state === "UT" ? "selected" : "" %>>Utah</option>
        	<option value="VT" <%= foundWorker.state === "VT" ? "selected" : "" %>>Vermont</option>
        	<option value="VA" <%= foundWorker.state === "VA" ? "selected" : "" %>>Virginia</option>
        	<option value="WA" <%= foundWorker.state === "WA" ? "selected" : "" %>>Washington</option>
        	<option value="WV" <%= foundWorker.state === "WV" ? "selected" : "" %>>West Virginia</option>
        	<option value="WI" <%= foundWorker.state === "WI" ? "selected" : "" %>>Wisconsin</option>
        	<option value="WY" <%= foundWorker.state === "WY" ? "selected" : "" %>>Wyoming</option>
        </select>
      </div>
      <div class="form-group col-md-2">
        <label for="zip">Zip</label>
        <input type="text" class="form-control" id="zip" name="zip" value="<%= foundWorker.zip %>">
      </div>
    </div>
    <div class="form-group">
      <% // Phone number formatting
        const formattedPhone = foundWorker.phone.slice(0, 3) + "-" + foundWorker.phone.slice(3, 6) + "-" + foundWorker.phone.slice(6)
      %>
      <label for="phone">Phone Number</label>
      <input type="text" class="form-control" id="phone" name="phone"  value="<%= formattedPhone %>">
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" class="form-control" id="email" name="email" value="<%= foundWorker.email %>">
    </div>
    <div class="form-group">
      <label for="shirtSize">Shirt Size</label>
      <select id="shirtSize" name="shirtSize" class="form-control">
        <option value="XS" <%= foundWorker.shirtSize === "XS" ? "selected" : "" %>>XS</option>
        <option value="S" <%= foundWorker.shirtSize === "S" ? "selected" : "" %>>S</option>
        <option value="M" <%= foundWorker.shirtSize === "M" ? "selected" : "" %>>M</option>
        <option value="L" <%= foundWorker.shirtSize === "L" ? "selected" : "" %>>L</option>
        <option value="XL" <%= foundWorker.shirtSize === "XL" ? "selected" : "" %>>XL</option>
        <option value="XXL" <%= foundWorker.shirtSize === "XXL" ? "selected" : "" %>>XXL</option>
        <option value="XXXL" <%= foundWorker.shirtSize === "XXXL" ? "selected" : "" %>>XXXL</option>
      </select>
    </div>
    <h3 class="mt-5 mb-3">Emergency Contacts</h3>
    <div class="form-group">
      <label for="ecOneName">Emergency Contact 1 Name</label>
      <input class="form-control" id="ecOneName" type="text" name="emergencyContacts[0][name]" value="<%= foundWorker.emergencyContacts[0].name %>">
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <% // Phone number formatting
          const ecOneFormattedPhone = foundWorker.emergencyContacts[0].phone.slice(0, 3) + "-" + foundWorker.emergencyContacts[0].phone.slice(3, 6) + "-" + foundWorker.emergencyContacts[0].phone.slice(6)
        %>
        <label for="ecOnePhone">Emergency Contact 1 Phone Number</label>
        <input class="form-control" id="ecOnePhone" type="text" name="emergencyContacts[0][phone]" value="<%= ecOneFormattedPhone %>">
      </div>
      <div class="form-group col-md-6">
        <label for="ecOneRelationship">Emergency Contact 1 Relationship</label>
        <input class="form-control" id="ecOneRelationship" type="text" name="emergencyContacts[0][relationship]" value="<%= foundWorker.emergencyContacts[0].relationship %>">
      </div>
    </div>
    <br />
    <div class="form-group">
      <label for="edTwoName">Emergency Contact 2 Name</label>
      <input class="form-control" id="edTwoName" type="text" name="emergencyContacts[1][name]" value="<%= foundWorker.emergencyContacts[1].name %>">
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <% // Phone number formatting
          const ecTwoFormattedPhone = foundWorker.emergencyContacts[1].phone.slice(0, 3) + "-" + foundWorker.emergencyContacts[1].phone.slice(3, 6) + "-" + foundWorker.emergencyContacts[1].phone.slice(6)
        %>
        <label for="ecTwoPhone">Emergency Contact 2 Phone Number</label>
        <input class="form-control" id="ecTwoPhone" type="text" name="emergencyContacts[1][phone]" value="<%= ecTwoFormattedPhone %>">
      </div>
      <div class="form-group col-md-6">
        <label for="ecTwoRelationship">Emergency Contact 1 Relationship</label>
        <input class="form-control" id="ecTwoRelationship" type="text" name="emergencyContacts[1][relationship]" value="<%= foundWorker.emergencyContacts[1].relationship %>">
      </div>
    </div>
    <br />
    <h3>Comments (optional)</h3>
    <div class="form-group">
      <label for="comments">Only visible to you</label>
      <textarea class="form-control" name="comments" id="comments" rows="8"><%= foundWorker.comments ? foundWorker.comments : "" %></textarea>
    </div>
    <div class="form-row">
      <div class="col-md-1">
        <button type="submit" class="btn btn-success mt-4">Submit</button>
      </div>
      <div class="col-md-1">
        <a href="/users/<%= currentUser._id %>" class="btn btn-danger mt-4 ml-3">Cancel</a>
      </div>
    </div>

  </form>
</div>

<script>
  $('#dob').datepicker({
    uiLibrary: 'bootstrap4'
  });
</script>

<% include ../partials/footer %>
